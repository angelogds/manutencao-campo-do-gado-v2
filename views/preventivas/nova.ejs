<% layout('layout') %>

<h1>Nova Preventiva</h1>
<p style="color:#6b7280; margin-top:-6px;">Cadastre um plano de manutenção preventiva.</p>

<div class="card" style="background:#fff; border:1px solid #e5e7eb; border-radius:16px; padding:14px; max-width:820px;">
  <form action="/preventivas" method="POST">

    <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px;">
      <div>
        <label style="font-weight:700;">Equipamento</label>
        <select name="equipamento_id" style="width:100%; padding:10px; border:1px solid #e5e7eb; border-radius:10px;">
          <option value="">(Opcional) Selecione</option>
          <% (equipamentos || []).forEach(e => { %>
            <option value="<%= e.id %>"><%= e.nome %></option>
          <% }) %>
        </select>
      </div>

      <div>
        <label style="font-weight:700;">Ativo</label>
        <select name="ativo" style="width:100%; padding:10px; border:1px solid #e5e7eb; border-radius:10px;">
          <option value="1" selected>SIM</option>
          <option value="0">NÃO</option>
        </select>
      </div>
    </div>

    <div style="margin-top:12px;">
      <label style="font-weight:700;">Título</label>
      <input name="titulo" required
        placeholder="Ex.: Lubrificação redutor / Verificar correias / Limpeza filtros"
        style="width:100%; padding:10px; border:1px solid #e5e7eb; border-radius:10px;" />
    </div>

    <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:12px;">
      <div>
        <label style="font-weight:700;">Frequência (tipo)</label>
        <select name="frequencia_tipo" style="width:100%; padding:10px; border:1px solid #e5e7eb; border-radius:10px;">
          <option value="diario">diário</option>
          <option value="semanal">semanal</option>
          <option value="mensal" selected>mensal</option>
          <option value="anual">anual</option>
          <option value="horimetro">horímetro</option>
        </select>
      </div>

      <div>
        <label style="font-weight:700;">Frequência (valor)</label>
        <input type="number" name="frequencia_valor" value="1" min="1"
          style="width:100%; padding:10px; border:1px solid #e5e7eb; border-radius:10px;" />
      </div>
    </div>

    <div style="margin-top:12px;">
      <label style="font-weight:700;">Observação</label>
      <textarea name="observacao" rows="4"
        style="width:100%; padding:10px; border:1px solid #e5e7eb; border-radius:10px;"
        placeholder="Detalhes do procedimento, peças, pontos de inspeção, etc."></textarea>
    </div>

    <div style="display:flex; gap:10px; margin-top:14px;">
      <button class="btn" type="submit">Salvar</button>
      <a class="btn btn-ghost" href="/preventivas" style="text-decoration:none;">Cancelar</a>
    </div>
  </form>
</div>

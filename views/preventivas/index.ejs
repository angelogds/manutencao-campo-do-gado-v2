<% layout('layout') %>

<h1>Preventivas</h1>
<p style="color:#6b7280; margin-top:-6px;">Planos e execuções de manutenção preventiva.</p>

<div style="display:flex; gap:10px; margin:14px 0;">
  <a class="btn" href="/preventivas/nova" style="text-decoration:none;">+ Nova Preventiva</a>
</div>

<div class="card" style="background:#fff; border:1px solid #e5e7eb; border-radius:16px; padding:14px;">
  <div style="overflow:auto;">
    <table style="width:100%; border-collapse:collapse;">
      <thead>
        <tr style="text-align:left; border-bottom:1px solid #e5e7eb;">
          <th style="padding:10px;">#</th>
          <th style="padding:10px;">Equipamento</th>
          <th style="padding:10px;">Título</th>
          <th style="padding:10px;">Frequência</th>
          <th style="padding:10px;">Ativo</th>
          <th style="padding:10px;">Ações</th>
        </tr>
      </thead>
      <tbody>
        <% if (!lista || !lista.length) { %>
          <tr>
            <td colspan="6" style="padding:14px; color:#6b7280;">Nenhuma preventiva cadastrada ainda.</td>
          </tr>
        <% } else { %>
          <% lista.forEach(p => { %>
            <tr style="border-bottom:1px solid #f3f4f6;">
              <td style="padding:10px;"><%= p.id %></td>
              <td style="padding:10px;"><%= p.equipamento_nome || "-" %></td>
              <td style="padding:10px; font-weight:700;"><%= p.titulo %></td>
              <td style="padding:10px;"><%= (p.frequencia_tipo || 'mensal') %> / <%= p.frequencia_valor || 1 %></td>
              <td style="padding:10px;"><%= p.ativo ? "SIM" : "NÃO" %></td>
              <td style="padding:10px;">
                <a class="btn btn-ghost" href="/preventivas/<%= p.id %>" style="text-decoration:none;">Ver</a>
              </td>
            </tr>
          <% }) %>
        <% } %>
      </tbody>
    </table>
  </div>
</div>

<% layout('layout') %>

<section class="auth">
  <div class="card auth-card">
    <h2>Entrar</h2>

    <% if (flash && flash.error && flash.error.length) { %>
      <div class="alert alert-error"><%= flash.error[0] %></div>
    <% } %>

    <% if (flash && flash.success && flash.success.length) { %>
      <div class="alert alert-success"><%= flash.success[0] %></div>
    <% } %>

    <% if (lockout) { %>
      <div class="alert alert-error">
        Muitas tentativas. Aguarde <b><%= lockout.remainingSeconds %></b> segundos e tente novamente.
      </div>
    <% } %>

    <% if (attemptsLeft !== null && attemptsLeft !== undefined) { %>
      <div class="alert alert-info">
        Tentativas restantes: <b><%= attemptsLeft %></b>
      </div>
    <% } %>

    <!-- âœ… ROTA CERTA -->
    <form action="/auth/login" method="POST">
      <label>Email</label>
      <input
        type="email"
        name="email"
        value="<%= rememberedEmail || '' %>"
        required
        autocomplete="email"
      />

      <label>Senha</label>
      <input
        type="password"
        name="password"
        required
        autocomplete="current-password"
      />

      <button type="submit">Entrar</button>
    </form>
  </div>
</section>

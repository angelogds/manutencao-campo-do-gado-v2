<% layout('layout') %>

<style>
  .dash-wrap { max-width: 1100px; }
  .subtitle { color:#6b7280; margin-top:-6px; }

  .grid-3 { display:grid; grid-template-columns:repeat(3, minmax(0,1fr)); gap:14px; margin-top:14px; }
  @media (max-width: 980px){ .grid-3{ grid-template-columns:1fr; } }

  .card {
    background:#fff;
    border:1px solid #e5e7eb;
    border-radius:16px;
    padding:14px;
    box-shadow: 0 10px 30px rgba(0,0,0,.03);
  }
  .card h3{ margin:0; font-size:14px; letter-spacing:.04em; color:#6b7280; text-transform:uppercase; }
  .card .row { display:flex; gap:10px; margin-top:12px; flex-wrap:wrap; }

  .btn-mini{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    padding:8px 10px;
    border-radius:12px;
    border:1px solid #e5e7eb;
    background:#fff;
    font-weight:800;
    font-size:13px;
    color:#111827;
    text-decoration:none;
    transition: all .15s ease;
  }
  .btn-mini:hover{
    background:#0f7a3a;   /* verde */
    border-color:#0f7a3a;
    color:#fff;
    transform: translateY(-1px);
  }

  .pill{
    font-size:12px;
    font-weight:900;
    padding:6px 10px;
    border-radius:999px;
    border:1px solid #e5e7eb;
    background:#f9fafb;
    color:#111827;
  }

  .line{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    margin-top:10px;
  }

  .muted{ color:#6b7280; font-size:13px; }
</style>

<div class="dash-wrap">
  <h1>Painel Principal</h1>
  <p class="subtitle">Visão geral do sistema (V2).</p>

  <div class="grid-3">
    <!-- OS -->
    <div class="card">
      <div class="line">
        <h3>Ordens de Serviço</h3>
        <span class="pill"><%= cards?.os_abertas ?? 0 %> abertas</span>
      </div>
      <div class="muted">Abrir / acompanhar / finalizar OS.</div>
      <div class="row">
        <a class="btn-mini" href="/os?status=ABERTA">Abertas</a>
        <a class="btn-mini" href="/os?status=ANDAMENTO">Acompanhar</a>
        <a class="btn-mini" href="/os?status=CONCLUIDA">Finalizadas</a>
        <a class="btn-mini" href="/os/new">Abrir OS</a>
      </div>
    </div>

    <!-- COMPRAS -->
    <div class="card">
      <div class="line">
        <h3>Compras (Inbox)</h3>
        <span class="pill"><%= cards?.compras_abertas ?? 0 %> em aberto</span>
      </div>
      <div class="muted">Solicitações: criar / feitas / aprovadas.</div>
      <div class="row">
        <a class="btn-mini" href="/compras/solicitacoes/new">Fazer solicitação</a>
        <a class="btn-mini" href="/compras/solicitacoes?status=aberta">Feitas</a>
        <a class="btn-mini" href="/compras/solicitacoes?status=aprovada">Aprovadas</a>
      </div>
    </div>

    <!-- ESTOQUE -->
    <div class="card">
      <div class="line">
        <h3>Estoque</h3>
        <span class="pill"><%= cards?.itens_estoque ?? 0 %> itens</span>
      </div>
      <div class="muted">Controle e consulta do almoxarifado.</div>
      <div class="row">
        <a class="btn-mini" href="/estoque">Controle</a>
        <a class="btn-mini" href="/estoque?view=itens">Itens</a>
      </div>
    </div>
  </div>
</div>

<% layout('layout') %>

<style>
  .grid{ display:grid; grid-template-columns:repeat(4, minmax(0,1fr)); gap:12px; }
  .card{ background:#fff; border:1px solid #e5e7eb; border-radius:16px; padding:14px; }
  .k{ color:#6b7280; font-weight:900; font-size:12px; letter-spacing:.04em; }
  .v{ font-size:28px; font-weight:900; margin-top:6px; }
  .row{ display:grid; grid-template-columns: 1fr 1fr 1fr; gap:12px; margin-top:14px; }
  .box{ background:#fff; border:1px solid #e5e7eb; border-radius:16px; padding:14px; }
  .box h3{ margin:0; font-size:14px; font-weight:900; }
  .mini{ display:flex; flex-wrap:wrap; gap:8px; margin-top:10px; }
  .btnMini{
    display:inline-flex; align-items:center; gap:8px;
    border:1px solid #e5e7eb; background:#fff;
    padding:8px 10px; border-radius:12px;
    font-weight:900; font-size:12px; cursor:pointer;
    text-decoration:none; color:#0f172a;
    transition:.15s;
  }
  .btnMini:hover{ background:#e7f5ee; border-color: rgba(17,128,85,.35); transform: translateY(-1px); }
  .pill{ font-weight:900; padding:4px 10px; border-radius:999px; background:#f1f5f9; }
  .muted{ color:#64748b; font-size:12px; margin-top:4px; }

  @media (max-width: 980px){ .grid{ grid-template-columns:repeat(2,1fr);} .row{ grid-template-columns:1fr; } }
  @media (max-width: 560px){ .grid{ grid-template-columns:1fr;} }
</style>

<h1>Painel Principal</h1>
<p class="muted">Vis√£o geral do sistema.</p>

<div class="grid">
  <div class="card">
    <div class="k">OS ABERTAS</div>
    <div class="v"><%= cards?.os_abertas ?? 0 %></div>
  </div>

  <div class="card">
    <div class="k">COMPRAS ABERTAS</div>
    <div class="v"><%= cards?.compras_abertas ?? 0 %></div>
  </div>

  <div class="card">
    <div class="k">ITENS ABAIXO DO M√çNIMO</div>
    <div class="v"><%= cards?.itens_abaixo_minimo ?? 0 %></div>
  </div>

  <div class="card">
    <div class="k">EQUIPAMENTOS</div>
    <div class="v"><%= cards?.equipamentos ?? 0 %></div>
  </div>
</div>

<div class="row">
  <!-- OS -->
  <div class="box">
    <h3>Ordens de Servi√ßo</h3>
    <div class="muted">Abertas, acompanhar e finalizadas</div>
    <div class="mini">
      <span class="pill">Abertas: <%= blocks?.os?.abertas ?? 0 %></span>
      <span class="pill">Finalizadas: <%= blocks?.os?.finalizadas ?? 0 %></span>
    </div>
    <div class="mini">
      <a class="btnMini" href="/os">üìå Abertas</a>
      <a class="btnMini" href="/os">üëÄ Acompanhar</a>
      <a class="btnMini" href="/os">‚úÖ Finalizadas</a>
      <a class="btnMini" href="/os/nova">‚ûï Abrir OS</a>
    </div>
  </div>

  <!-- COMPRAS -->
  <div class="box">
    <h3>Compras</h3>
    <div class="muted">Solicita√ß√µes feitas e aprovadas</div>
    <div class="mini">
      <span class="pill">Feitas: <%= blocks?.compras?.feitas ?? 0 %></span>
      <span class="pill">Aprovadas: <%= blocks?.compras?.aprovadas ?? 0 %></span>
    </div>
    <div class="mini">
      <a class="btnMini" href="/solicitacoes/nova">‚ûï Fazer solicita√ß√£o</a>
      <a class="btnMini" href="/solicitacoes">üìÑ Solicita√ß√µes feitas</a>
      <a class="btnMini" href="/solicitacoes">‚úÖ Solicita√ß√µes aprovadas</a>
      <a class="btnMini" href="/compras">üßæ Compras</a>
    </div>
  </div>

  <!-- ESTOQUE -->
  <div class="box">
    <h3>Estoque</h3>
    <div class="muted">Controle de itens dispon√≠veis no almoxarifado</div>
    <div class="mini">
      <span class="pill">Itens cadastrados: <%= cards?.itens_estoque ?? 0 %></span>
    </div>
    <div class="mini">
      <a class="btnMini" href="/estoque">üì¶ Controle</a>
      <a class="btnMini" href="/estoque/novo">‚ûï Cadastrar item</a>
    </div>
  </div>
</div>

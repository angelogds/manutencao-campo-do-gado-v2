<% layout('layout') %>

<div class="page-head">
  <div>
    <h1>Dashboard</h1>
    <p class="muted">Visão geral do sistema (V2).</p>
  </div>
</div>

<div class="grid-2" style="grid-template-columns:repeat(3,minmax(0,1fr)); gap:14px;">
  <!-- OS -->
  <div class="card">
    <div class="label">Ordem de Serviço</div>
    <div style="font-size:22px; font-weight:900; margin-top:6px;">Abrir / Acompanhar</div>
    <div class="muted" style="margin-top:6px;">Abertas, em andamento e concluídas</div>

    <div style="display:flex; flex-wrap:wrap; gap:10px; margin-top:12px;">
      <span class="pill-tag pill-amber">Abertas: <%= (cards?.os_abertas ?? 0) %></span>
      <span class="pill-tag pill-green">Finalizadas: <%= (cards?.os_finalizadas ?? 0) %></span>
    </div>

    <div style="display:flex; flex-wrap:wrap; gap:10px; margin-top:14px;">
      <a class="btn btn-green btn-sm" href="/os/nova">Abrir OS</a>
      <a class="btn btn-ghost btn-sm" href="/os">Acompanhar</a>
      <a class="btn btn-ghost btn-sm" href="/os?status=CONCLUIDA">Finalizadas</a>
    </div>
  </div>

  <!-- Compras -->
  <div class="card">
    <div class="label">Compras</div>
    <div style="font-size:22px; font-weight:900; margin-top:6px;">Solicitações</div>
    <div class="muted" style="margin-top:6px;">Criar e acompanhar solicitações</div>

    <div style="display:flex; flex-wrap:wrap; gap:10px; margin-top:12px;">
      <span class="pill-tag pill-blue">Abertas: <%= (cards?.compras_abertas ?? 0) %></span>
      <span class="pill-tag pill-green">Aprovadas: <%= (cards?.compras_aprovadas ?? 0) %></span>
    </div>

    <div style="display:flex; flex-wrap:wrap; gap:10px; margin-top:14px;">
      <a class="btn btn-green btn-sm" href="/solicitacoes/nova">Fazer solicitação</a>
      <a class="btn btn-ghost btn-sm" href="/solicitacoes">Ver solicitações</a>
      <a class="btn btn-ghost btn-sm" href="/compras">Compras</a>
    </div>
  </div>

  <!-- Estoque -->
  <div class="card">
    <div class="label">Estoque</div>
    <div style="font-size:22px; font-weight:900; margin-top:6px;">Controle</div>
    <div class="muted" style="margin-top:6px;">Itens cadastrados e movimentações</div>

    <div style="display:flex; flex-wrap:wrap; gap:10px; margin-top:12px;">
      <span class="pill-tag pill-gray">Itens: <%= (cards?.itens_estoque ?? 0) %></span>
      <span class="pill-tag pill-amber">Abaixo mín.: <%= (cards?.itens_abaixo_minimo ?? 0) %></span>
    </div>

    <div style="display:flex; flex-wrap:wrap; gap:10px; margin-top:14px;">
      <a class="btn btn-green btn-sm" href="/estoque">Ver estoque</a>
      <a class="btn btn-ghost btn-sm" href="/estoque/novo">Cadastrar item</a>
    </div>
  </div>
</div>

<% layout('layout') %>

<h1>Nova OS</h1>
<p class="muted">Selecione um equipamento cadastrado para evitar digitação.</p>

<div class="card">
  <form method="POST" action="/os">
    <div class="grid2">
      <div>
        <label class="label">Equipamento (cadastro)</label>
        <select name="equipamento_id" class="input">
          <option value="">Selecione...</option>
          <% (equipamentos || []).forEach(e => { %>
            <option value="<%= e.id %>">
              <%= (e.codigo ? e.codigo + " • " : "") + e.nome %>
              <%= e.setor ? " • " + e.setor : "" %>
            </option>
          <% }) %>
        </select>
        <div class="muted" style="margin-top:6px;">
          Se não achar, informe no campo abaixo.
        </div>
      </div>

      <div>
        <label class="label">Equipamento (texto)</label>
        <input class="input" name="equipamento_texto" placeholder="Ex: Digestor Laranja" />
      </div>
    </div>

    <div class="grid2">
      <div>
        <label class="label">Tipo</label>
        <select name="tipo" class="input">
          <option value="CORRETIVA">CORRETIVA</option>
          <option value="PREVENTIVA">PREVENTIVA</option>
          <option value="NR12">NR12</option>
          <option value="OUTRA">OUTRA</option>
        </select>
      </div>

      <div></div>
    </div>

    <div style="margin-top:12px;">
      <label class="label">Descrição do serviço</label>
      <textarea class="input" name="descricao" rows="4" placeholder="Descreva o serviço..."></textarea>
    </div>

    <div style="display:flex; gap:10px; margin-top:14px;">
      <button class="btn" type="submit">Salvar OS</button>
      <a class="btn btn-ghost" href="/os">Cancelar</a>
    </div>
  </form>
</div>

<style>
  .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media(max-width:900px){.grid2{grid-template-columns:1fr}}
</style>

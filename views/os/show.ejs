<% layout('layout') %>

<div style="display:flex; justify-content:space-between; gap:12px; align-items:flex-start;">
  <div>
    <h1>OS #<%= os.id %></h1>
    <div class="muted">Equipamento: <strong><%= os.equipamento_nome || os.equipamento %></strong></div>
    <div class="muted">Aberta em: <%= os.opened_at ? fmtBR(os.opened_at) : '-' %></div>
    <div class="muted">Grau: <strong><%= os.grau || os.grau_dificuldade || os.nivel_grau || os.prioridade || '-' %></strong></div>
  </div>

  <a class="btn btn-ghost" href="/os">Voltar</a>
</div>

<div class="card" style="margin-top:14px;">
  <div class="muted">Descrição</div>
  <div style="margin-top:6px;"><%= os.descricao %></div>
</div>

<div class="card" style="margin-top:14px;">
  <form method="POST" action="/os/<%= os.id %>/status">
    <div class="grid2">
      <div>
        <label class="label">Status</label>
        <select class="input" name="status">
          <option value="ABERTA" <%= os.status==='ABERTA'?'selected':'' %>>ABERTA</option>
          <option value="EM_ANDAMENTO" <%= (os.status==='ANDAMENTO' || os.status==='EM_ANDAMENTO')?'selected':'' %>>EM ANDAMENTO</option>
          <option value="PAUSADA" <%= os.status==='PAUSADA'?'selected':'' %>>PAUSADA</option>
          <option value="CONCLUIDA" <%= os.status==='CONCLUIDA'?'selected':'' %>>CONCLUIDA</option>
          <option value="CANCELADA" <%= os.status==='CANCELADA'?'selected':'' %>>CANCELADA</option>
        </select>
      </div>

      <div style="display:flex; align-items:flex-end; gap:10px;">
        <button class="btn" type="submit">Atualizar</button>
      </div>
    </div>
  </form>
</div>

<style>
  .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media(max-width:900px){.grid2{grid-template-columns:1fr}}
</style>
